<!DOCTYPE html>
<html lang="zh-CN">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Ae1autumn</title>
   <link rel="icon" href="" as="style" onload="this.onload=null;this.rel='stylesheet'">
   <noscript>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   </noscript>
   <style>
      :root {
         --primary-color: #e74c3c;
         --dark-bg: #121212;
         --dark-card: #1e1e1e;
         --light-bg: #f5f7fa;
         --light-primary: #e74c3c;
         --transition-time: 0.3s;
      }
      
      .theme-transitioning * {
          transition: none !important;
      }


      * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Ubuntu, Cantarell, sans-serif;
      }

      html,
      body {
         height: 100%;
         background-color: var(--dark-bg);
         color: #ffffff;
         line-height: 1.6;
         transition: background-color var(--transition-time), color var(--transition-time);
      }

      .container {
         max-width: 1200px;
         margin: 0 auto;
         padding: 13px;
         height: 100%;
      }

      .mobile-layout {
         display: flex;
         flex-direction: column;
         height: 100%;
         overflow: hidden;
         position: relative;
      }

      .mobile-top-section {
         background-color: var(--dark-card);
         border-radius: 10px;
         margin-bottom: 5px;
         box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
         transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
         flex-shrink: 0;
         contain: layout style;
         will-change: height, padding;
         z-index: 10;
         position: relative;
      }

      .mobile-top-section.expanded {
         padding: 10px 15px 15px;
         max-height: 265px;
      }

      .mobile-top-section.collapsed {
         padding: 10px 15px 0px;
         min-height: 50px;
      }

      .mobile-top-bar {
         display: flex;
         align-items: center;
         justify-content: space-between;
         margin-bottom: 10px;
         min-height: 40px;
      }

      .avatar {
         width: 40px;
         height: 40px;
         border-radius: 50%;
         background-color: var(--primary-color);
         display: flex;
         align-items: center;
         justify-content: center;
         color: white;
         font-size: 18px;
         flex-shrink: 0;
         will-change: transform, background-color;
         transition: transform 0.2s ease-out, background-color var(--transition-time);
         contain: layout style;
      }

      .mobile-title-container {
         flex-grow: 1;
         text-align: center;
         cursor: pointer;
         padding: 0 15px;
         display: flex;
         align-items: center;
         justify-content: center;
         min-height: 40px;
      }

      .mobile-title {
         color: white;
         font-size: 18px;
         font-weight: 600;
         transition: all var(--transition-time) ease;
      }

      .menu-btn {
         width: 36px;
         height: 36px;
         border-radius: 50%;
         background-color: transparent;
         display: flex;
         align-items: center;
         justify-content: center;
         color: white;
         font-size: 18px;
         cursor: pointer;
         flex-shrink: 0;
         border: none;
         outline: none;
         will-change: transform, background-color;
         transition: transform 0.2s ease-out, background-color var(--transition-time);
         contain: layout style;
         z-index: 1002;
         position: relative;
      }

      .mobile-top-card {
         background-color: #121212;
         border-radius: 8px;
         padding: 20px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
         max-height: 190px;
         overflow: hidden;
         color: white;
         will-change: max-height, opacity, transform;
         contain: layout style;
         overflow-y: auto;
         scrollbar-width: none;
         -ms-overflow-style: none;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .mobile-top-section.collapsed .mobile-top-card {
         max-height: 0;
         padding: 0;
         margin: 0;
         opacity: 0;
         transform: translateY(-10px);
      }

      .floating-menu {
         position: fixed;
         top: 60px;
         right: 0px;
         background-color: var(--dark-card);
         border-radius: 8px;
         padding: 15px;
         z-index: 10;
         visibility: hidden;
         opacity: 0;
         width: 105px;

         max-width: calc(100% - 30px);
         color: white;
         will-change: opacity, transform, visibility;
         transition: opacity 0.25s ease-out, transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.25s;
         contain: layout style;
         transform-origin: top right;
         min-width: 0;
         transform: scale(0.9);
      }

      .floating-menu.active {
         visibility: visible;
         opacity: 1;
         transform: scale(1);
         transition: opacity 0.25s ease-out, transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.25s;
      }

      .floating-menu.closing {
         visibility: visible;
         opacity: 0;
         transform: scale(0.9);
         transition: opacity 0.25s ease-out, transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.25s;
      }

      .menu-items {
         margin-top: 0px;
      }

      .menu-item {
         padding: 10px 0;
         border-bottom: 1px solid #333;
         font-size: 16px;
         cursor: pointer;
         color: white;
         transition: color 0.2s ease-out, transform 0.2s ease-out;
         will-change: color, transform;
         contain: layout style;
         text-decoration: none;
         display: block;
      }

      .menu-item:hover {
         color: var(--primary-color);
         transform: translateX(5px);
      }

      .article-list-section {
         flex: 1 1 0;
         min-height: 0;
         display: flex;
         flex-direction: column;
         overflow: hidden;
         will-change: transform;
         contain: layout style;
         z-index: 1;
         position: relative;
      }

      .mobile-cards-container {
         flex: 1;
         display: flex;
         flex-direction: column;
         min-height: 0;
         overflow: hidden;
      }

      .mobile-cards-wrapper {
         flex: 1;
         display: flex;
         gap: 15px;
         padding: 10px 5px 15px;
         overflow-x: auto;
         overflow-y: hidden;
         -ms-overflow-style: none;
         scrollbar-width: none;
         will-change: transform;
         backface-visibility: hidden;
         -webkit-backface-visibility: hidden;
         transform: translateZ(0);
         -webkit-transform: translateZ(0);
         contain: layout style paint;
         z-index: 1;
      }

      .mobile-cards-wrapper::-webkit-scrollbar {
         display: none;
      }

      .rectangle-card {
         min-width: 82px;
         height: 100%;
         border-radius: 10px;
         cursor: pointer;
         transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
         position: relative;
         overflow: hidden;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         flex-shrink: 0;
         will-change: transform, min-width;
         contain: layout style;
         background: linear-gradient(135deg, var(--primary-color), #c0392b);
         z-index: 1;
      }

      .rectangle-card.active {
         min-width: 279px;
         background: linear-gradient(135deg, #c0392b, #a93226);
         z-index: 2;
      }

      .vertical-title {
         letter-spacing: 0.1em;
         position: absolute;
         top: 20px;
         left: 13px;
         color: white;
         font-size: 18px;
         font-weight: bold;
         writing-mode: vertical-rl;
         text-orientation: mixed;
         transform: rotate(0deg);
         transition: opacity var(--transition-time) ease;
         text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
      }

      .rectangle-card.active .vertical-title {
         opacity: 0;
      }

      .card-content-expanded {
         position: absolute;
         top: 0;
         left: 0;
         width: 279px;
         height: 100%;
         padding: 15px;
         color: white;
         opacity: 0;
         transition: opacity var(--transition-time) ease 0.2s;
         display: flex;
         flex-direction: column;
         overflow: hidden;
      }

      .rectangle-card.active .card-content-expanded {
         opacity: 1;
      }

      .card-tags {
         display: flex;
         gap: 8px;
         margin-bottom: 10px;
         flex-shrink: 0;
         flex-wrap: wrap;
      }

      .card-tag {
         background-color: rgba(255, 255, 255, 0.1);
         color: white;
         padding: 4px 8px;
         border-radius: 4px;
         font-size: 12px;
         font-weight: 500;
         will-change: transform, background-color;
         transition: transform 0.2s ease-out, background-color 0.2s ease-out;
         contain: layout style;
         width: auto;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
         max-width: 200px;
      }

      .date-tag {
         font-weight: 500;
         padding-left: 6px;
      }

      .card-title-container {
         flex-shrink: 0;
         margin-bottom: 10px;
         overflow: hidden;
      }

      .card-title-container h2 {
         font-size: 22px;
         font-weight: 600;
         color: white;
         margin: 0;
         will-change: transform;
         transition: transform 0.2s ease-out;
         contain: layout style;
         overflow: hidden;
         text-overflow: ellipsis;
         display: -webkit-box;
         -webkit-line-clamp: 2;
         -webkit-box-orient: vertical;
         word-break: break-word;
      }

      .card-content-main {
         flex: 1;
         overflow-y: auto;
         scrollbar-width: none;
         -ms-overflow-style: none;
         margin-bottom: 10px;
         padding-right: 5px;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .card-content-main::-webkit-scrollbar {
         display: none;
      }

      .card-content-main p {
         font-size: 14px;
         line-height: 1.5;
         margin-bottom: 10px;
         opacity: 0.9;
         color: white;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .card-footer {
         flex-shrink: 0;
         padding-top: 10px;
         display: flex;
      }

      .mobile-card-btn {
         background-color: rgba(255, 255, 255, 0.2);
         color: white;
         border: none;
         width: 100%;
         padding: 8px 16px;
         margin-left: 12%;
         border-radius: 5px;
         cursor: pointer;
         font-weight: 500;
         font-size: 14px;
         transition: background-color 0.2s ease-out, transform 0.2s ease-out;
         will-change: transform, background-color;
         contain: layout style;
         white-space: nowrap;
      }

      .special-card {
         background: linear-gradient(135deg, var(--primary-color), #c0392b);
         color: white;
         border-radius: 10px;
         padding: 15px;
         box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
         cursor: pointer;
         transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
         overflow: hidden;
         flex-shrink: 0;
         will-change: transform, background;
         contain: layout style;
         z-index: 1;
         position: relative;
      }

      .special-card-header {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 0;
         padding: 0;
         cursor: pointer;
         user-select: none;
         -webkit-user-select: none;
         -moz-user-select: none;
         -ms-user-select: none;
         will-change: transform;
         transition: transform 0.2s ease-out;
         contain: layout style;
      }

      .special-card-title {
         font-size: 18px;
         font-weight: 600;
         color: white;
         margin: 0;
         pointer-events: none;
         will-change: transform;
         transition: transform 0.2s ease-out;
         contain: layout style;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
      }

      .special-card-content {
         max-height: 0;
         opacity: 0;
         overflow: hidden;
         transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
         will-change: max-height, opacity, margin, padding;
         contain: layout style;
         padding-top: 0;
         margin-top: 0;
         transform-origin: top;
      }

      .special-card.expanded .special-card-content {
         max-height: 320px;
         opacity: 1;
         margin-top: 10px;
      }

      .special-cards-container {
         display: flex;
         flex-direction: column;
         gap: 15px;
         height: auto;
         max-height: 194px;
         overflow-y: auto;
         scrollbar-width: none;
         -ms-overflow-style: none;
         will-change: transform;
         padding-right: 0px;
      }

      .special-cards-container::-webkit-scrollbar {
         display: none;
      }

      .special-card-item {
         background-color: rgba(255, 255, 255, 0.1);
         border-radius: 8px;
         padding: 15px;
         box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
         display: flex;
         flex-direction: column;
         flex-shrink: 0;
         height: 187px;
         overflow: hidden;
         cursor: auto;
         will-change: transform, opacity;
         transition: transform 0.2s ease-out, opacity 0.2s ease-out;
         contain: layout style;
      }

      .special-card-item-content {
         display: flex;
         flex-direction: column;
         height: 100%;
         overflow: hidden;
      }

      .special-card-item .card-tags {
         margin-bottom: 8px;
      }

      .special-card-item h4 {
         font-size: 16px;
         font-weight: 600;
         margin-bottom: 8px;
         color: white;
         flex-shrink: 0;
         will-change: transform;
         transition: transform 0.2s ease-out;
         contain: layout style;
         overflow: hidden;
         text-overflow: ellipsis;
         white-space: nowrap;
      }

      .special-card-item-content-main {
         flex: 1;
         overflow-y: auto;
         scrollbar-width: none;
         -ms-overflow-style: none;
         margin-bottom: 8px;
         padding-right: 5px;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .special-card-item-content-main::-webkit-scrollbar {
         display: none;
      }

      .special-card-item-content-main p {
         font-size: 14px;
         line-height: 1.5;
         margin-bottom: 8px;
         opacity: 0.9;
         color: white;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .special-card-item-footer {
         flex-shrink: 0;
         padding-top: 8px;
         display: flex;
         justify-content: flex-end;
      }

      .special-card-btn {
         background-color: rgba(255, 255, 255, 0.2);
         color: white;
         border: none;
         padding: 8px 16px;
         border-radius: 5px;
         cursor: pointer;
         font-weight: 500;
         font-size: 14px;
         transition: background-color 0.2s ease-out, transform 0.2s ease-out;
         will-change: transform, background-color;
         contain: layout style;
         white-space: nowrap;
      }

      .special-card.only-content {
         padding: 0;
         background: transparent;
         box-shadow: none;
         cursor: default;
         border-radius: 10;
         height: auto;
         min-height: 0;
      }

      .special-card.only-content .special-card-header {
         display: none;
      }

      .special-card.only-content .special-card-content {
         max-height: none;
         opacity: 1;
         margin-top: 0;
         padding: 0;
         overflow: visible;
         height: auto;
         min-height: 0;
         cursor: auto;
      }

      .special-card.only-content .special-cards-container {
         display: block;
         max-height: none;
         overflow: visible;
         gap: 0;
         height: auto;
         min-height: 0;
         padding: 0;
         margin: 0;
      }

      .special-card.only-content .special-card-item {
         background-color: transparent;
         padding: 0;
         margin: 0;
         box-shadow: none;
         height: auto;
         min-height: 0;
         max-height: none;
         border-radius: 10;
         cursor: default;
      }

      .special-card.only-content .special-card-item-content {
         display: block;
         height: auto;
         min-height: 0;
         max-height: none;
         overflow: visible;
         padding: 0;
         margin: 0;
      }

      .special-card.only-content .special-card-item-content-main {
         overflow: visible;
         max-height: none;
         height: auto;
         min-height: 0;
         padding: 0;
         margin: 0;
         color: white;
         font-size: 16px;
         line-height: 1.6;
         opacity: 0.9;
         font-style: italic;
         text-align: center;
         background: transparent;
         border-radius: 0;
         cursor: default;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .special-card.only-content .card-tags,
      .special-card.only-content .special-card-item h4,
      .special-card.only-content .special-card-item-footer {
         display: none;
      }

      .special-card-item-content-simple {
         color: white;
         font-size: 16px;
         line-height: 1.6;
         opacity: 0.9;
         font-style: italic;
         text-align: center;
         padding: 20px 15px;
         background: rgba(255, 255, 255, 0.05);
         border-radius: 8px;
         cursor: default;
         width: 100%;
         box-sizing: border-box;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .search-overlay {
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.8);
         z-index: 1000;
         display: none;
         justify-content: center;
         align-items: center;
         opacity: 0;
         transition: opacity 0.3s ease;
         backdrop-filter: blur(5px);
      }

      .search-overlay.active {
         display: flex;
         opacity: 1;
      }

      .search-container {
         width: 90%;
         max-width: 500px;
         height: auto;
         background-color: var(--dark-card);
         border-radius: 12px;
         padding: 25px;
         box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
         transform: translateY(20px);
         opacity: 0;
         transition: transform 0.3s ease, opacity 0.3s ease;
         position: relative;
         word-wrap: break-word;
         overflow-wrap: break-word;
         word-break: break-word;
      }

      .search-overlay.active .search-container {
         transform: translateY(0);
         opacity: 1;
      }

      .search-input-container {
         position: relative;
         margin-bottom: 20px;
      }

      .search-input {
         width: 100%;
         padding: 15px 20px;
         background-color: rgba(255, 255, 255, 0.1);
         border: 2px solid rgba(255, 255, 255, 0.2);
         border-radius: 8px;
         color: white;
         font-size: 16px;
         outline: none;
         transition: all 0.3s ease;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
      }

      .search-input:focus {
         border-color: var(--primary-color);
         background-color: rgba(255, 255, 255, 0.15);
      }

      .search-input.error {
         border-color: #ff0000 !important;
         animation: shake 0.5s ease-in-out;
      }

      @keyframes shake {

         0%,
         100% {
            transform: translateX(0);
         }

         25% {
            transform: translateX(-5px);
         }

         75% {
            transform: translateX(5px);
         }
      }

      .search-options {
         display: flex;
         gap: 10px;
         flex-wrap: wrap;
         justify-content: center;
      }

      .search-option {
         padding: 8px 16px;
         background-color: rgba(255, 255, 255, 0.1);
         color: white;
         border: none;
         border-radius: 5px;
         cursor: pointer;
         font-size: 14px;
         transition: all 0.2s ease;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
      }

      .search-option:hover {
         background-color: rgba(255, 255, 255, 0.2);
      }

      .search-option.active {
         background-color: var(--primary-color);
         color: white;
         box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
      }

      .search-mode-indicator {
         position: absolute;
         top: 10px;
         right: 10px;
         background-color: var(--primary-color);
         color: white;
         padding: 5px 10px;
         border-radius: 4px;
         font-size: 12px;
         display: none;
         z-index: 100;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
      }

      .light-mode {
         background-color: var(--light-bg);
         color: white;
      }

      .light-mode .mobile-top-section {
         background-color: var(--light-primary);
      }

      .light-mode .mobile-top-card {
         background-color: white;
         color: gray;
      }

      .light-mode .mobile-top-card h2 {
         color: #cdcdcd;
      }

      .light-mode .floating-menu {
         background-color: white;
         color: gray;
      }

      .light-mode .menu-item {
         border-bottom-color: #eee;
         color: gray;
      }

      .light-mode .menu-item:hover {
         color: var(--light-primary);
      }

      /* 日间模式下卡片的默认颜色 */
      .light-mode .rectangle-card {
        background: linear-gradient(135deg, var(--light-primary), #c0392b);
      }
      
      .light-mode .rectangle-card.active {
        background: linear-gradient(135deg, #c0392b, #a93226);
      }
      
      /* 使用 data-color-index 的卡片颜色 */
      .light-mode .rectangle-card[data-color-index="1"] {
        background: linear-gradient(135deg, #ffb6c1, #ff69b4);
      }
      
      .light-mode .rectangle-card[data-color-index="1"].active {
        background: linear-gradient(135deg, #ff69b4, #ff1493);
      }
      
      .light-mode .rectangle-card[data-color-index="2"] {
        background: linear-gradient(135deg, #98fb98, #90ee90);
      }
      
      .light-mode .rectangle-card[data-color-index="2"].active {
        background: linear-gradient(135deg, #90ee90, #7cfc00);
      }
      
      .light-mode .rectangle-card[data-color-index="3"] {
        background: linear-gradient(135deg, #add8e6, #87ceeb);
      }
      
      .light-mode .rectangle-card[data-color-index="3"].active {
        background: linear-gradient(135deg, #87ceeb, #6495ed);
      }
      
      .light-mode .rectangle-card[data-color-index="4"] {
        background: linear-gradient(135deg, #fffacd, #f0e68c);
      }
      
      .light-mode .rectangle-card[data-color-index="4"].active {
        background: linear-gradient(135deg, #f0e68c, #ffd700);
      }
      
      .light-mode .rectangle-card[data-color-index="5"] {
        background: linear-gradient(135deg, #d3d3d3, #c0c0c0);
      }
      
      .light-mode .rectangle-card[data-color-index="5"].active {
        background: linear-gradient(135deg, #c0c0c0, #a9a9a9);
      }
      
      /* 保留原来的特殊卡片和搜索相关样式（不要修改这些） */
      .light-mode .special-card {
        background: linear-gradient(135deg, #d8bfd8, #dda0dd);
      }
      
      .light-mode .special-card.expanded {
        background: linear-gradient(135deg, #dda0dd, #eeb1ee);
      }

      .light-mode .special-card-item {
         background-color: rgba(255, 255, 255, 0.2);
      }

      .light-mode .special-card-item h4 {
         color: white;
      }

      .light-mode .card-tag {
         background-color: rgba(0, 0, 0, 0.1);
         color: white;
      }

      .light-mode .date-tag {
         background-color: rgba(0, 0, 0, 0.15) !important;
         border-left-color: var(--light-primary);
      }

      .light-mode .vertical-title {
         color: white;
         text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
      }

      .light-mode .rectangle-card.active .card-content-expanded h2 {
         color: white;
      }

      .light-mode .special-card-title {
         color: white;
      }

      .light-mode .search-overlay {
         background-color: rgba(0, 0, 0, 0.5);
      }

      .light-mode .search-container {
         background-color: white;
         color: #333;
      }

      .light-mode .search-input {
         background-color: rgba(0, 0, 0, 0.05);
         border-color: rgba(0, 0, 0, 0.1);
         color: #333;
      }

      .light-mode .search-input:focus {
         border-color: var(--light-primary);
         background-color: rgba(0, 0, 0, 0.08);
      }

      .light-mode .search-input.error {
         border-color: #ff0000 !important;
      }

      .light-mode .search-option {
         background-color: rgba(0, 0, 0, 0.05);
         color: #333;
      }

      .light-mode .search-option:hover {
         background-color: rgba(0, 0, 0, 0.1);
      }

      .light-mode .search-option.active {
         background-color: var(--light-primary);
         color: white;
         box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
      }

      .menu-btn:active,
      .close-menu:active,
      .mobile-card-btn:active,
      .special-card-btn:active {
         transform: scale(0.95);
      }

      .card-tag:hover {
         transform: translateY(-1px);
         background-color: rgba(255, 255, 255, 0.2);
      }

      .card-title-container h2:hover {
         transform: translateX(2px);
      }

      .special-card-item:hover {
         transform: translateY(-2px);
         opacity: 0.95;
      }

      .special-card-title:hover {
         transform: translateX(2px);
      }

      .mobile-top-section,
      .mobile-top-card,
      .special-card,
      .special-card-content,
      .rectangle-card,
      .search-overlay,
      .search-container {
         backface-visibility: hidden;
         -webkit-backface-visibility: hidden;
         perspective: 1000;
         -webkit-perspective: 1000;
      }

      .mobile-cards-wrapper,
      .special-cards-container,
      .card-content-main,
      .special-card-item-content-main {
         scroll-behavior: smooth;
         -webkit-overflow-scrolling: touch;
      }

      /* ==================== 虚拟滚动相关样式 ==================== */
      .mobile-cards-wrapper {
         flex: 1;
         display: flex;
         flex-direction: column;
         min-height: 0;
         overflow: hidden;
         position: relative;
      }

      .cards-viewport {
         flex: 1;
         position: relative;
         overflow-x: auto;
         overflow-y: hidden;
         -ms-overflow-style: none;
         scrollbar-width: none;
         will-change: transform;
         backface-visibility: hidden;
         -webkit-backface-visibility: hidden;
         transform: translateZ(0);
         -webkit-transform: translateZ(0);
         contain: layout style paint;
         z-index: 1;
      }

      .cards-viewport::-webkit-scrollbar {
         display: none;
      }

      .cards-container {
         position: relative;
         height: 100%;
         will-change: transform;
         contain: layout style;
      }

      .rectangle-card {
         position: absolute;
         top: 0;
         height: 100%;
         min-width: 82px;
         border-radius: 10px;
         cursor: pointer;
         transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
         overflow: hidden;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         will-change: transform, min-width, left;
         contain: layout style;
         background: linear-gradient(135deg, var(--primary-color), #c0392b);
         z-index: 1;
      }

      .rectangle-card.active {
         min-width: 279px;
         background: linear-gradient(135deg, #c0392b, #a93226);
         z-index: 2;
      }


      /* 响应式调整 */
      @media (max-width: 480px) {
         .rectangle-card {
            min-width: 70px;
         }
         
         .rectangle-card.active {
            min-width: 250px;
         }
         
         .card-content-expanded {
            width: 250px;
         }
      }

      @media (max-width: 360px) {
         .rectangle-card {
            min-width: 65px;
         }
         
         .rectangle-card.active {
            min-width: 220px;
         }
         
         .card-content-expanded {
            width: 220px;
         }
      }
   </style>
</head>

<body class="dark">
   <div class="container">
      <div class="mobile-layout">
         <div class="mobile-top-section expanded" id="mobileTopSection">
            <div class="mobile-top-bar">
               <div class="avatar" role="img" aria-label="Avatar">
                  <img src="" alt="avatar"
                                                                                                                                          style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
               </div>
               <div class="mobile-title-container" id="titleToggle" tabindex="0" role="button"
                                                                                                                                       aria-label="Toggle Title">
                  <div class="mobile-title">Ae1autumn</div>
               </div>
               <button class="menu-btn" id="menuBtn" aria-label="Menu" aria-expanded="false"
                                                                                                                                       aria-controls="floatingMenu">≡</button>
            </div>
            <div class="mobile-top-card">
               <p></p>
            </div>

            <div class="floating-menu" id="floatingMenu" role="menu" aria-hidden="true">
               <div class="menu-items" id="menuItems">
                  <div class="menu-item" id="searchMenuItem" role="menuitem" tabindex="0">搜索</div>
                  <div class="menu-item" id="darkModeToggle" role="menuitem" tabindex="0">日间模式</div>
               </div>
            </div>
         </div>

         <div class="article-list-section" id="articleListSection">
            <div class="mobile-cards-container">
               <div class="mobile-cards-wrapper" id="mobileCardsWrapper">
                  <!-- 虚拟滚动容器 -->
                  <div class="cards-viewport" id="cardsViewport">
                     <div class="cards-container" id="cardsContainer"></div>
                     <!-- 移除了scroll-hint -->
                  </div>
               </div>
            </div>
         </div>

         <section class="special-card" id="specialCard" aria-labelledby="specialCardTitle" aria-expanded="false">
            <div class="special-card-header">
               <h3 id="specialCardTitle" class="special-card-title"></h3>
            </div>
            <div class="special-card-content" id="specialCardContent">
               <div class="special-cards-container" id="specialCardsContainer">
               </div>
            </div>
         </section>
      </div>
   </div>

   <div class="search-overlay" id="searchOverlay">
      <div class="search-container">
         <div class="search-input-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Enter确认,点击标题退出" autocomplete="off">
         </div>
         <div class="search-options" id="searchOptions">
            <button class="search-option active" data-type="title">标题</button>
            <button class="search-option" data-type="tag">标签</button>
            <button class="search-option" data-type="content">简介</button>
         </div>
      </div>
   </div>

   <script>
      // ==================== 数据注入点 (由生成引擎替换) ====================
      const blogData = {
        articles: [{"id": "11", "title": "01.29", "date": "2026-01-29", "tags": ["记录", "普通"], "content": "", "url": "article/11.html", "verticalTitle": "01.29"}],
        specials: []
      };
      const menuItemsData = ;
      const blogConfig = {
        themeColor: " #e74c3c ",
        runDate: "  "
      };
      
      // ==================== 辅助函数 ====================
      function escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }
      
      function debounce(func, delay) {
        let timeoutId;
        return (...args) => {
          clearTimeout(timeoutId);
          timeoutId = setTimeout(() => func.apply(this, args), delay);
        };
      }
      
      function sortArticlesByDateDesc(articles) {
        return articles.sort((a, b) => new Date(b.date) - new Date(a.date));
      }
      
      function filterArticles(articles, keyword, type) {
        if (!keyword.trim()) return articles;
        
        keyword = keyword.trim().toLowerCase();
        
        return articles.filter(article => {
          if (type === 'title') {
            return article.title.toLowerCase().includes(keyword);
          } 
          else if (type === 'tag') {
            const keywords = keyword.split(' ').filter(k => k.trim() !== '');
            if (keywords.length === 0) return true;
            
            const filteredTags = article.tags ? article.tags.filter(tag => 
              tag && !['top', 'special', '项目'].includes(tag.toLowerCase().trim())
            ) : [];
            
            return keywords.some(k => 
              filteredTags.some(tag => tag.toLowerCase().includes(k))
            );
          } 
          else if (type === 'content') {
            return article.content.some(c => c.toLowerCase().includes(keyword));
          }
          return true;
        });
      }
      
      // ==================== 更新卡片颜色索引函数 ====================
      function updateCardsColorIndices() {
        const isLightMode = document.body.classList.contains('light-mode');
        const cards = document.querySelectorAll('.rectangle-card');
        
        cards.forEach((card, index) => {
          const cardIndex = parseInt(card.getAttribute('data-index') || index);
          const colorIndex = (cardIndex % 5) + 1;
          
          // 总是设置颜色索引
          card.setAttribute('data-color-index', colorIndex);
          
          // 如果是暗色模式，移除可能存在的旧的颜色样式
          if (!isLightMode) {
            card.style.background = '';
          }
        });
      }
      
      // ==================== 强制更新所有卡片颜色 ====================
      function forceUpdateAllCardsColor() {
        const isLightMode = document.body.classList.contains('light-mode');
        
        // 获取所有卡片
        const cards = document.querySelectorAll('.rectangle-card');
        
        cards.forEach((card, index) => {
          const cardIndex = parseInt(card.getAttribute('data-index') || index);
          const colorIndex = (cardIndex % 5) + 1;
          
          // 确保 data-color-index 属性存在
          if (!card.hasAttribute('data-color-index')) {
            card.setAttribute('data-color-index', colorIndex);
          }
          
          // 如果是日间模式，强制重新计算样式
          if (isLightMode) {
            // 强制样式重新计算
            card.style.display = 'none';
            card.offsetHeight; // 触发重排
            card.style.display = '';
          }
        });
      }
      
      // ==================== 标签过滤器 ====================
      class TagFilter {
        constructor() {
          this.internalTags = new Set(  );
        }
        
        filterTags(tags) {
          if (!tags || !Array.isArray(tags)) {
            return [];
          }
          return tags.filter(tag => tag && !this.internalTags.has(tag.toLowerCase().trim()));
        }
        
        shouldDisplayByTag(tags) {
          if (!tags || !Array.isArray(tags)) return true;
          return tags.some(tag => !this.internalTags.has(tag.toLowerCase().trim()));
        }
        
        getFirstDisplayableTag(tags) {
          if (!tags || !Array.isArray(tags)) return null;
          for (let tag of tags) {
            if (tag && !this.internalTags.has(tag.toLowerCase().trim())) {
              return tag;
            }
          }
          return null;
        }
      }
      
      // 初始化标签过滤器
      const tagFilter = new TagFilter();
      
      // ==================== 虚拟滚动管理器 ====================
      class VirtualScroll {
        constructor() {
          this.viewport = document.getElementById('cardsViewport');
          this.container = document.getElementById('cardsContainer');
          
          // 卡片尺寸配置
          this.cardWidth = {
            collapsed: 82,
            expanded: 279
          };
          
          this.buffer = 2;
          
          this.state = {
            allArticles: [],
            visibleArticles: [],
            renderedCards: new Map(),
            cardStates: new Map(),
            scrollLeft: 0,
            viewportWidth: 0,
            containerWidth: 0,
            isScrolling: false,
            scrollTimer: null,
            activeCardIndex: 1
          };
          
          this.themeTransitionTimeout = null;
          
          this.bindEvents();
        }
        
        init(articles) {
          this.state.allArticles = [...articles];
          this.calculateViewportSize();
          this.updateContainerSize();
          this.renderVisibleCards();
        }
        
        calculateViewportSize() {
          const rect = this.viewport.getBoundingClientRect();
          this.state.viewportWidth = rect.width;
        }
        
        updateContainerSize() {
          let totalWidth = 0;
          const gap = 15;
          
          this.state.allArticles.forEach((article, index) => {
            const isActive = index === this.state.activeCardIndex;
            const width = isActive ? this.cardWidth.expanded : this.cardWidth.collapsed;
            
            this.state.cardStates.set(index, {
              isActive,
              width,
              left: totalWidth
            });
            
            totalWidth += width + gap;
          });
          
          totalWidth -= gap;
          this.state.containerWidth = totalWidth;
          this.container.style.width = `${totalWidth}px`;
        }
        
        getVisibleRange() {
          const scrollLeft = this.state.scrollLeft;
          const viewportWidth = this.state.viewportWidth;
          
          let startIndex = -1;
          let endIndex = -1;
          let currentLeft = 0;
          
          for (let i = 0; i < this.state.allArticles.length; i++) {
            const state = this.state.cardStates.get(i);
            if (!state) continue;
            
            if (currentLeft + state.width > scrollLeft) {
              startIndex = Math.max(0, i - this.buffer);
              break;
            }
            currentLeft += state.width + 15;
          }
          
          if (startIndex === -1) {
            startIndex = 0;
            currentLeft = 0;
          }
          
          let viewportRight = scrollLeft + viewportWidth;
          for (let i = startIndex; i < this.state.allArticles.length; i++) {
            const state = this.state.cardStates.get(i);
            if (!state) continue;
            
            if (currentLeft > viewportRight) {
              endIndex = Math.min(this.state.allArticles.length - 1, i + this.buffer);
              break;
            }
            
            if (i === this.state.allArticles.length - 1) {
              endIndex = this.state.allArticles.length - 1;
            }
            
            currentLeft += state.width + 15;
          }
          
          return { startIndex, endIndex };
        }
        
        renderVisibleCards() {
          const { startIndex, endIndex } = this.getVisibleRange();
          
          for (const [index, card] of this.state.renderedCards) {
            if (index < startIndex || index > endIndex) {
              card.remove();
              this.state.renderedCards.delete(index);
            }
          }
          
          for (let i = startIndex; i <= endIndex; i++) {
            if (!this.state.renderedCards.has(i)) {
              const card = this.createCardElement(i);
              if (card) {
                this.container.appendChild(card);
                this.state.renderedCards.set(i, card);
              }
            }
            
            this.updateCardPosition(i);
          }
        }
        
        createCardElement(index) {
          const article = this.state.allArticles[index];
          const cardState = this.state.cardStates.get(index);
          
          if (!article || !cardState) return null;
          
          const card = document.createElement('article');
          card.className = `rectangle-card ${cardState.isActive ? 'active' : ''}`;
          card.id = `card${index + 1}`;
          card.setAttribute('role', 'article');
          card.setAttribute('data-index', index);
          
          // 设置颜色索引 (1-5 循环)
          const colorIndex = (index % 5) + 1;
          card.setAttribute('data-color-index', colorIndex);
          
          const filteredTags = tagFilter.filterTags(article.tags);
          const firstDisplayableTag = tagFilter.getFirstDisplayableTag(article.tags);
          const vTitle = article.verticalTitle || firstDisplayableTag || 'Blog';
          
          let tagsHTML = '';
          if (article.date) {
            tagsHTML += `<span class="card-tag date-tag">${article.date}</span>`;
          }
          if (filteredTags && Array.isArray(filteredTags)) {
            tagsHTML += filteredTags.map(tag => `<span class="card-tag">${escapeHtml(tag)}</span>`).join('');
          }
          
          let contentHTML = '';
          if (article.content && Array.isArray(article.content)) {
            contentHTML = article.content.map(p => `<p>${escapeHtml(p)}</p>`).join('');
          }
          
          card.innerHTML = `
            <div class="vertical-title">${escapeHtml(vTitle)}</div>
            <div class="card-content-expanded">
              <div class="card-tags">
                ${tagsHTML}
              </div>
              <div class="card-title-container">
                <h2 id="card${index + 1}Title">${escapeHtml(article.title)}</h2>
              </div>
              <div class="card-content-main">
                ${contentHTML}
              </div>
              <div class="card-footer">
                <button class="mobile-card-btn" onclick="window.location.href='${escapeHtml(article.url)}'">Read</button>
              </div>
            </div>
          `;
          
          card.addEventListener('click', (e) => {
            if (e.target.closest('.mobile-card-btn')) return;
            this.handleCardClick(index);
          });
          
          return card;
        }
        
        updateCardPosition(index) {
          const card = this.state.renderedCards.get(index);
          const cardState = this.state.cardStates.get(index);
          
          if (card && cardState) {
            card.style.left = `${cardState.left}px`;
            card.style.width = `${cardState.width}px`;
          }
        }
        
        handleCardClick(clickedIndex) {
          if (this.state.cardStates.get(clickedIndex).isActive) {
            this.deactivateCard(clickedIndex);
          } else {
            this.state.cardStates.forEach((state, index) => {
              if (state.isActive) {
                this.deactivateCard(index);
              }
            });
            
            this.activateCard(clickedIndex);
          }
          
          this.scrollToCard(clickedIndex);
        }
        
        activateCard(index) {
          const cardState = this.state.cardStates.get(index);
          if (!cardState) return;
          
          cardState.isActive = true;
          cardState.width = this.cardWidth.expanded;
          
          this.state.activeCardIndex = index;
          
          const card = this.state.renderedCards.get(index);
          if (card) {
            card.classList.add('active');
          }
          
          this.updateAllPositions();
        }
        
        deactivateCard(index) {
          const cardState = this.state.cardStates.get(index);
          if (!cardState) return;
          
          cardState.isActive = false;
          cardState.width = this.cardWidth.collapsed;
          
          const card = this.state.renderedCards.get(index);
          if (card) {
            card.classList.remove('active');
          }
          
          this.updateAllPositions();
        }
        
        updateAllPositions() {
          let currentLeft = 0;
          const gap = 15;
          
          for (let i = 0; i < this.state.allArticles.length; i++) {
            const cardState = this.state.cardStates.get(i);
            if (!cardState) continue;
            
            cardState.left = currentLeft;
            currentLeft += cardState.width + gap;
            
            if (this.state.renderedCards.has(i)) {
              this.updateCardPosition(i);
            }
          }
          
          this.state.containerWidth = currentLeft - gap;
          this.container.style.width = `${this.state.containerWidth}px`;
        }
        
        scrollToCard(index) {
          const cardState = this.state.cardStates.get(index);
          if (!cardState) return;
          
          const viewportWidth = this.state.viewportWidth;
          const cardLeft = cardState.left;
          const cardWidth = cardState.width;
          
          let targetScroll = cardLeft - (viewportWidth - cardWidth) / 2;
          targetScroll = Math.max(0, Math.min(targetScroll, this.state.containerWidth - viewportWidth));
          
          // 使用平滑滚动效果
          this.viewport.scrollTo({
            left: targetScroll,
            behavior: 'smooth'
          });
        }
        
        // 重置滚动到起始位置（用于退出搜索模式）
        resetScrollToStart() {
          // 立即重置滚动位置到最左边，不使用平滑效果
          this.viewport.scrollLeft = 0;
          this.state.scrollLeft = 0;
          this.renderVisibleCards();
        }
        
        handleScroll() {
          this.state.scrollLeft = this.viewport.scrollLeft;
          
          this.viewport.classList.add('scrolling');
          this.state.isScrolling = true;
          
          if (this.state.scrollTimer) {
            clearTimeout(this.state.scrollTimer);
          }
          
          this.state.scrollTimer = setTimeout(() => {
            this.viewport.classList.remove('scrolling');
            this.state.isScrolling = false;
          }, 150);
          
          this.renderVisibleCards();
        }
        
        handleResize() {
          this.calculateViewportSize();
          this.renderVisibleCards();
        }
        
        bindEvents() {
          this.viewport.addEventListener('scroll', () => this.handleScroll());
          
          this.debouncedResize = debounce(() => this.handleResize(), 150);
          window.addEventListener('resize', this.debouncedResize);
        }
        
        // 主题切换时禁用卡片过渡
        prepareForThemeTransition() {
          if (this.themeTransitionTimeout) {
            clearTimeout(this.themeTransitionTimeout);
          }
          
          const cards = this.container.querySelectorAll('.rectangle-card');
          cards.forEach(card => {
            card.style.transition = 'none';
          });
        }
        
        restoreAfterThemeTransition() {
          const cards = this.container.querySelectorAll('.rectangle-card');
          
          this.themeTransitionTimeout = setTimeout(() => {
            cards.forEach(card => {
              card.style.transition = '';
            });
            this.themeTransitionTimeout = null;
          }, 50);
        }
        
        destroy() {
          this.viewport.removeEventListener('scroll', () => this.handleScroll());
          window.removeEventListener('resize', this.debouncedResize);
          if (this.state.scrollTimer) {
            clearTimeout(this.state.scrollTimer);
          }
          if (this.themeTransitionTimeout) {
            clearTimeout(this.themeTransitionTimeout);
          }
        }
        
        // 修改setSearchMode方法，处理退出搜索模式时的滚动重置
        setSearchMode(isSearchMode, filteredArticles = null) {
          const articles = filteredArticles || this.state.allArticles;
          this.init(articles);
          
          // 搜索模式下只展开第一张卡片，正常模式下只展开第二张卡片
          const activeIndex = isSearchMode ? 0 : 1;
          
          setTimeout(() => {
            // 先取消所有卡片的激活状态
            this.state.cardStates.forEach((state, index) => {
              if (state.isActive) {
                this.deactivateCard(index);
              }
            });
            
            // 激活指定卡片
            this.activateCard(activeIndex);
            
            if (isSearchMode) {
              // 进入搜索模式：滚动到第一张卡片
              this.scrollToCard(activeIndex);
            } else {
              // 退出搜索模式：重置滚动到起始位置
              this.resetScrollToStart();
            }
          }, 100);
        }
      }
      
      // ==================== 状态管理 ====================
      const state = {
        isSearchMode: false,
        originalArticles: [],
        currentArticles: [],
        searchType: 'title',
        virtualScroll: null
      };
      
      // ==================== 主题管理 ====================
      function getCurrentTheme() {
        return document.body.classList.contains('light-mode') ? 'light' : 'dark';
      }
      
      function setTheme(theme) {
        const isLight = theme === 'light';
        
        if (isLight) {
          document.body.classList.add('light-mode');
          document.body.classList.remove('dark-mode');
        } else {
          document.body.classList.add('dark-mode');
          document.body.classList.remove('light-mode');
        }
        
        const themeBtn = document.getElementById('darkModeToggle');
        if (themeBtn) {
          themeBtn.textContent = isLight ? '夜间模式' : '日间模式';
        }
        
        localStorage.setItem('theme', theme);
      }
      
      // 主题切换防抖处理
      let themeTransitionTimeout = null;
      
      function toggleTheme() {
        const currentTheme = getCurrentTheme();
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        // 清除可能存在的延迟
        if (themeTransitionTimeout) {
          clearTimeout(themeTransitionTimeout);
        }
        
        // 批量更新：先准备所有卡片
        updateCardsColorIndices();
        
        // 禁用所有卡片过渡效果
        if (state.virtualScroll) {
          state.virtualScroll.prepareForThemeTransition();
        }
        
        // 添加过渡禁用类
        document.body.classList.add('theme-transitioning');
        
        // 切换主题
        setTheme(newTheme);
        
        // 短暂延迟后恢复
        themeTransitionTimeout = setTimeout(() => {
          document.body.classList.remove('theme-transitioning');
          
          if (state.virtualScroll) {
            state.virtualScroll.restoreAfterThemeTransition();
          }
          
          closeFloatingMenu();
          themeTransitionTimeout = null;
        }, 50);
      }
      
      function initTheme() {
        const savedTheme = localStorage.getItem('theme');
        
        if (savedTheme === 'light' || savedTheme === 'dark') {
          setTheme(savedTheme);
        } else {
          const initialTheme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
          setTheme(initialTheme);
        }
      }
      
      // ==================== 渲染函数 ====================
      function renderArticles(articles = blogData.articles, isSearchMode = false) {
        // 确保文章列表区域始终显示
        const articleListSection = document.getElementById('articleListSection');
        if (articleListSection) {
          articleListSection.style.display = 'flex';
        }
        
        if (state.virtualScroll) {
          state.virtualScroll.setSearchMode(isSearchMode, articles);
        } else {
          state.virtualScroll = new VirtualScroll();
          state.virtualScroll.init(articles);
        }
      }
      
      function shouldShowOnlyContent(special) {
        const hasTitle = special.title && special.title.trim() !== '';
        const hasTags = special.tags && special.tags.length > 0;
        const hasContent = special.content && special.content.length > 0;
        return hasContent && !hasTitle && !hasTags;
      }
      
      function renderSpecialCards() {
        const container = document.getElementById('specialCardsContainer');
        const specialSection = document.getElementById('specialCard');
        container.innerHTML = '';
        
        if (!blogData.specials || blogData.specials.length === 0) {
          specialSection.style.display = 'none';
          return;
        }
        
        if (blogData.specials.length === 1 && shouldShowOnlyContent(blogData.specials[0])) {
          specialSection.classList.add('only-content');
          specialSection.querySelector('.special-card-header').style.cursor = 'default';
          specialSection.classList.add('expanded');
          specialSection.setAttribute('aria-expanded', 'true');
          
          const item = document.createElement('div');
          item.className = 'special-card-item-content-simple';
          
          let contentHTML = '';
          if (blogData.specials[0].content && Array.isArray(blogData.specials[0].content)) {
            contentHTML = blogData.specials[0].content.map(p => `<p>${escapeHtml(p)}</p>`).join('');
          }
          item.innerHTML = contentHTML;
          
          container.appendChild(item);
        } else {
          specialSection.classList.remove('only-content');
          specialSection.querySelector('.special-card-header').style.cursor = 'pointer';
          
          blogData.specials.forEach(special => {
            const item = document.createElement('div');
            item.className = 'special-card-item';
            
            const filteredTags = tagFilter.filterTags(special.tags);
            
            let tagsHTML = '';
            if (filteredTags && Array.isArray(filteredTags)) {
              tagsHTML = filteredTags.map(t => `<span class="card-tag">${escapeHtml(t)}</span>`).join('');
            }
            
            let contentHTML = '';
            if (special.content && Array.isArray(special.content)) {
              contentHTML = special.content.map(p => `<p>${escapeHtml(p)}</p>`).join('');
            }
            
            let buttonHTML = '';
            if (special.url) {
              buttonHTML = `
                <div class="special-card-item-footer">
                  <button class="special-card-btn" onclick="window.open('${escapeHtml(special.url)}', '_blank')">Visit</button>
                </div>
              `;
            }
            
            item.innerHTML = `
              <div class="special-card-item-content">
                ${filteredTags.length > 0 ? `
                <div class="card-tags">
                  ${tagsHTML}
                </div>
                ` : ''}
                ${special.title ? `<h4>${escapeHtml(special.title)}</h4>` : ''}
                <div class="special-card-item-content-main">
                  ${contentHTML}
                </div>
                ${buttonHTML}
              </div>
            `;
            
            container.appendChild(item);
          });
        }
      }
      
      function renderDynamicMenuItems() {
        const menuContainer = document.getElementById('menuItems');
        const searchBtn = document.getElementById('searchMenuItem');
        const themeBtn = document.getElementById('darkModeToggle');
        
        while (menuContainer.firstChild) {
          menuContainer.removeChild(menuContainer.firstChild);
        }
        
        menuContainer.appendChild(searchBtn);
        
        if (menuItemsData && Array.isArray(menuItemsData)) {
          menuItemsData.forEach(item => {
            if (item.url) {
              const link = document.createElement('a');
              link.className = 'menu-item';
              link.href = item.url;
              link.textContent = item.display;
              link.onclick = () => closeFloatingMenu();
              menuContainer.appendChild(link);
            } else if (item.tag) {
              const matchedArticle = blogData.articles.find(article => 
                article.tags && article.tags.includes(item.tag)
              );
              
              if (matchedArticle && matchedArticle.url) {
                const link = document.createElement('a');
                link.className = 'menu-item';
                link.href = matchedArticle.url;
                link.textContent = item.display || item.tag;
                link.onclick = () => closeFloatingMenu();
                menuContainer.appendChild(link);
              }
            }
          });
        }
        
        menuContainer.appendChild(themeBtn);
      }
      
      // ==================== 搜索功能 ====================
      function enterSearchMode(filteredArticles) {
        state.isSearchMode = true;
        state.currentArticles = filteredArticles;
        const sortedArticles = sortArticlesByDateDesc([...filteredArticles]);
        renderArticles(sortedArticles, true);
        closeSearchOverlay();
      }
      
      function exitSearchMode() {
        state.isSearchMode = false;
        state.currentArticles = [];
        const originalSorted = sortArticlesByDateDesc([...blogData.articles]);
        renderArticles(originalSorted, false);
        closeSearchOverlay();
      }
      
      function performSearch() {
        const input = document.getElementById('searchInput');
        const keyword = input.value.trim();
        const searchType = state.searchType;
        
        if (!keyword) {
          showSearchError('未输入');
          return;
        }
        
        let filtered = filterArticles(blogData.articles, keyword, searchType);
        
        if (filtered.length === 0) {
          showSearchError(`没有符合"${keyword}"的文章`);
          return;
        }
        
        enterSearchMode(filtered);
      }
      
      function showSearchError(message) {
        const input = document.getElementById('searchInput');
        input.value = '';
        input.placeholder = message;
        input.classList.add('error');
        
        const restoreOnNextInput = () => {
          input.classList.remove('error');
          input.placeholder = 'Enter确认,点击标题退出';
          input.removeEventListener('input', restoreOnNextInput);
        };
        
        input.addEventListener('input', restoreOnNextInput);
      }
      
      // ==================== UI 交互控制 ====================
      function openSearchOverlay() {
        const overlay = document.getElementById('searchOverlay');
        const input = document.getElementById('searchInput');
        
        input.value = '';
        input.placeholder = 'Enter确认,点击标题退出';
        input.classList.remove('error');
        
        overlay.classList.add('active');
        input.focus();
      }
      
      function closeSearchOverlay() {
        document.getElementById('searchOverlay').classList.remove('active');
      }
      
      function openFloatingMenu() {
        const menu = document.getElementById('floatingMenu');
        menu.classList.remove('closing');
        menu.classList.add('active');
        document.getElementById('menuBtn').setAttribute('aria-expanded', 'true');
        menu.setAttribute('aria-hidden', 'false');
      }
      
      function closeFloatingMenu() {
        const menu = document.getElementById('floatingMenu');
        if (menu.classList.contains('active')) {
          menu.classList.add('closing');
          menu.classList.remove('active');
          
          setTimeout(() => {
            menu.classList.remove('closing');
            menu.setAttribute('aria-hidden', 'true');
            document.getElementById('menuBtn').setAttribute('aria-expanded', 'false');
          }, 250);
        }
      }
      
      function toggleFloatingMenu() {
        const menu = document.getElementById('floatingMenu');
        
        if (menu.classList.contains('active') || menu.classList.contains('closing')) {
          closeFloatingMenu();
        } else {
          openFloatingMenu();
        }
      }
      
      // ==================== 事件绑定 ====================
      function bindEvents() {
        // 搜索菜单项点击事件
        document.getElementById('searchMenuItem').addEventListener('click', () => {
          openSearchOverlay();
          closeFloatingMenu();
        });
        
        // 菜单按钮点击事件
        document.getElementById('menuBtn').addEventListener('click', (e) => {
          e.stopPropagation();
          toggleFloatingMenu();
        });
        
        // 搜索输入框事件
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
          if (e.key === 'Enter') performSearch();
        });
        
        // 键盘事件
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            const overlay = document.getElementById('searchOverlay');
            if (overlay.classList.contains('active')) {
              closeSearchOverlay();
            }
            const floatingMenu = document.getElementById('floatingMenu');
            if (floatingMenu.classList.contains('active')) {
              closeFloatingMenu();
            }
          }
        });
        
        // 搜索选项点击事件
        document.querySelectorAll('#searchOptions .search-option').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelectorAll('#searchOptions .search-option').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            state.searchType = btn.dataset.type;
            
            setTimeout(() => {
              document.getElementById('searchInput').focus();
            }, 10);
          });
        });
        
        // 搜索遮罩点击事件
        document.getElementById('searchOverlay').addEventListener('click', (e) => {
          if (e.target === e.currentTarget) closeSearchOverlay();
        });
        
        // 全局点击事件
        document.addEventListener('click', (e) => {
          const menu = document.getElementById('floatingMenu');
          const btn = document.getElementById('menuBtn');
          
          if (!menu.contains(e.target) && !btn.contains(e.target) && 
              (menu.classList.contains('active') || menu.classList.contains('closing'))) {
            closeFloatingMenu();
          }
        });
        
        const floatingMenu = document.getElementById('floatingMenu');
        floatingMenu.addEventListener('click', (e) => {
          e.stopPropagation();
        });
        
        // 主题切换事件
        document.getElementById('darkModeToggle').addEventListener('click', toggleTheme);
        
        // 标题点击事件 - 修改：点击标题退出搜索模式
        document.getElementById('titleToggle').addEventListener('click', () => {
          if (state.isSearchMode) {
            exitSearchMode();
          } else {
            const topSection = document.getElementById('mobileTopSection');
            topSection.classList.toggle('expanded');
            topSection.classList.toggle('collapsed');
          }
        });
        
        // 特殊卡片点击事件 - 修复版
        const specialCardHeader = document.querySelector('.special-card-header');
        if (specialCardHeader) {
          specialCardHeader.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // 只有当有多个特殊卡片或单个卡片有标题/标签时才允许展开
            const shouldToggle = blogData.specials.length > 1 || 
                (blogData.specials.length === 1 && 
                 (blogData.specials[0].title || 
                  (blogData.specials[0].tags && blogData.specials[0].tags.length > 0)));
            
            if (shouldToggle) {
              const card = document.getElementById('specialCard');
              card.classList.toggle('expanded');
              card.setAttribute('aria-expanded', card.classList.contains('expanded'));
            }
          });
        }
      }
      
      function bindMenuEvents() {
        const menuContainer = document.getElementById('menuItems');
        const menuItemElements = menuContainer.querySelectorAll('.menu-item');
        
        menuItemElements.forEach(item => {
          if (item.id !== 'searchMenuItem' && item.id !== 'darkModeToggle') {
            item.addEventListener('click', () => {
              closeFloatingMenu();
            });
          }
        });
      }
      
      // ==================== 页面初始化 ====================
      document.addEventListener('DOMContentLoaded', () => {
        // 初始化主题
        initTheme();
        
        // 初始化状态
        state.originalArticles = [...blogData.articles];
        state.currentArticles = blogData.articles;
        
        // 渲染内容
        const sortedArticles = sortArticlesByDateDesc([...blogData.articles]);
        renderArticles(sortedArticles, false);
        renderSpecialCards();
        
        // 渲染动态菜单项
        renderDynamicMenuItems();
        
        // 绑定事件
        bindEvents();
        bindMenuEvents();
        
        // 设置主题颜色
        if (blogConfig.themeColor) {
          document.documentElement.style.setProperty('--primary-color', blogConfig.themeColor);
        }
        
        // 延迟更新卡片颜色，确保DOM已完全渲染
        setTimeout(() => {
          updateCardsColorIndices();
          // 如果是日间模式，额外强制更新一次
          if (document.body.classList.contains('light-mode')) {
            setTimeout(forceUpdateAllCardsColor, 50);
          }
        }, 100);
      });
      
      // 浏览器前进后退按钮处理 - 修复文章页返回后列表消失的问题
      window.addEventListener('popstate', (event) => {
        // 重新渲染整个页面来恢复状态
        const sortedArticles = sortArticlesByDateDesc([...blogData.articles]);
        renderArticles(sortedArticles, false);
        renderSpecialCards();
        
        // 重新绑定事件
        bindEvents();
        bindMenuEvents();
        
        // 如果处于搜索模式，退出搜索模式
        if (state.isSearchMode) {
          state.isSearchMode = false;
          state.currentArticles = [];
        }
        
        // 更新卡片颜色
        setTimeout(() => {
          updateCardsColorIndices();
          if (document.body.classList.contains('light-mode')) {
            setTimeout(forceUpdateAllCardsColor, 50);
          }
        }, 100);
      });
      
      // 页面卸载时清理
      window.addEventListener('beforeunload', () => {
        if (state.virtualScroll) {
          state.virtualScroll.destroy();
        }
        if (themeTransitionTimeout) {
          clearTimeout(themeTransitionTimeout);
        }
      });
   
   </script>
   
</body>

</html>